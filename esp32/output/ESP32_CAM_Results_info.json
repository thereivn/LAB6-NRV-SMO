{"format":"Transformational debugger info","version":1,
"info":{"name":"ESP32_CAM_Thermal_Energy","description":"Complete thermal and energy model of ESP32-CAM"},
"variables":{
"T_chip":{"comment":"Chip temperature (K)","kind":"state","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":25,"lineEnd":25,"colStart":3,"colEnd":65}}},
"der(T_chip)":{"comment":"der(Chip temperature (K))","kind":"derivative","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":25,"lineEnd":25,"colStart":3,"colEnd":65}}},
"SoC":{"comment":"State of Charge (%)","kind":"variable","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":29,"lineEnd":29,"colStart":3,"colEnd":33}}},
"T_case":{"comment":"Case temperature (K)","kind":"variable","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":26,"lineEnd":26,"colStart":3,"colEnd":37}}},
"T_celsius":{"comment":"Chip temperature in \uffffffc2\uffffffb0C","kind":"variable","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":30,"lineEnd":30,"colStart":3,"colEnd":43}}},
"T_heatsink":{"comment":"Heatsink temperature (K)","kind":"variable","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":27,"lineEnd":27,"colStart":3,"colEnd":45}}},
"battery_charge":{"comment":"Battery charge remaining (Ah)","kind":"variable","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":32,"lineEnd":32,"colStart":3,"colEnd":54}}},
"i_load":{"comment":"Load current (A)","kind":"variable","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":33,"lineEnd":33,"colStart":3,"colEnd":33}}},
"p_dissipation":{"comment":"Power dissipation (W)","kind":"variable","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":34,"lineEnd":34,"colStart":3,"colEnd":45}}},
"power_consumption":{"comment":"Instantaneous power consumption (W)","kind":"variable","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":31,"lineEnd":31,"colStart":3,"colEnd":63}}},
"t_next_switch":{"comment":"Time of next mode switch","kind":"variable","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":35,"lineEnd":35,"colStart":3,"colEnd":59}}},
"mode":{"comment":"1=Video, 2=Processing, 3=Sleep","kind":"discrete","type":"Integer","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":28,"lineEnd":28,"colStart":3,"colEnd":59}}},
"C_chip":{"comment":"Chip heat capacity (J/K)","kind":"parameter","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":7,"lineEnd":7,"colStart":3,"colEnd":55}}},
"I_processing":{"comment":"Current in processing mode (A)","kind":"parameter","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":16,"lineEnd":16,"colStart":3,"colEnd":71}}},
"I_sleep":{"comment":"Current in sleep mode (A)","kind":"parameter","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":17,"lineEnd":17,"colStart":3,"colEnd":61}}},
"I_video":{"comment":"Current in video mode (A)","kind":"parameter","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":15,"lineEnd":15,"colStart":3,"colEnd":61}}},
"P_active":{"comment":"Power dissipation in active mode (W)","kind":"parameter","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":11,"lineEnd":11,"colStart":3,"colEnd":71}}},
"P_sleep":{"comment":"Power dissipation in sleep mode (W)","kind":"parameter","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":12,"lineEnd":12,"colStart":3,"colEnd":69}}},
"Q_initial":{"comment":"Initial battery charge (Ah)","kind":"parameter","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":19,"lineEnd":19,"colStart":3,"colEnd":63}}},
"R_case_heatsink":{"comment":"Case to heatsink thermal resistance (K/W)","kind":"parameter","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":9,"lineEnd":9,"colStart":3,"colEnd":81}}},
"R_chip_case":{"comment":"Chip to case thermal resistance (K/W)","kind":"parameter","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":8,"lineEnd":8,"colStart":3,"colEnd":74}}},
"R_heatsink_air":{"comment":"Heatsink to air thermal resistance (K/W)","kind":"parameter","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":10,"lineEnd":10,"colStart":3,"colEnd":80}}},
"T_ambient":{"comment":"Ambient temperature (\uffffffc2\uffffffb0C)","kind":"parameter","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":6,"lineEnd":6,"colStart":3,"colEnd":60}}},
"T_initial":{"comment":"Initial temperature (\uffffffc2\uffffffb0C)","kind":"parameter","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":5,"lineEnd":5,"colStart":3,"colEnd":60}}},
"V_battery":{"comment":"Battery voltage (V)","kind":"parameter","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":18,"lineEnd":18,"colStart":3,"colEnd":55}}},
"t_processing":{"comment":"Processing time (s)","kind":"parameter","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":21,"lineEnd":21,"colStart":3,"colEnd":57}}},
"t_sleep":{"comment":"Sleep time (s)","kind":"parameter","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":22,"lineEnd":22,"colStart":3,"colEnd":47}}},
"t_video":{"comment":"Video recording time (s)","kind":"parameter","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":20,"lineEnd":20,"colStart":3,"colEnd":57}}},
"PROCESSING":{"comment":"","kind":"constant","type":"Integer","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":39,"lineEnd":39,"colStart":3,"colEnd":34}}},
"SLEEP":{"comment":"","kind":"constant","type":"Integer","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":40,"lineEnd":40,"colStart":3,"colEnd":29}}},
"VIDEO":{"comment":"","kind":"constant","type":"Integer","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":38,"lineEnd":38,"colStart":3,"colEnd":29}}},
"T_case.$pDERLSJac1.dummyVarLSJac1":{"comment":"Case temperature (K)","kind":"jacobian differentiated variable","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":26,"lineEnd":26,"colStart":3,"colEnd":37}}},
"$res_LSJac1_1.$pDERLSJac1.dummyVarLSJac1":{"comment":"","kind":"jacobian variable","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"","lineStart":0,"lineEnd":0,"colStart":0,"colEnd":0}}},
"T_case.$pDERLSJac0.dummyVarLSJac0":{"comment":"Case temperature (K)","kind":"jacobian differentiated variable","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":26,"lineEnd":26,"colStart":3,"colEnd":37}}},
"$res_LSJac0_1.$pDERLSJac0.dummyVarLSJac0":{"comment":"","kind":"jacobian variable","type":"Real","unit":"","displayUnit":"","source":{"info":{"file":"","lineStart":0,"lineEnd":0,"colStart":0,"colEnd":0}}}
},
"equations":[{"eqIndex":0,"tag":"dummy"},
{"eqIndex":1,"tag":"alias","equation":[22],"section":"initial"},
{"eqIndex":2,"tag":"alias","equation":[23],"section":"initial"},
{"eqIndex":3,"tag":"alias","equation":[27],"section":"initial"},
{"eqIndex":4,"tag":"alias","equation":[24],"section":"initial"},
{"eqIndex":5,"tag":"alias","equation":[25],"section":"initial"},
{"eqIndex":6,"tag":"alias","equation":[26],"section":"initial"},
{"eqIndex":7,"section":"initial","tag":"assign","defines":["t_next_switch"],"uses":["t_sleep","t_processing","time","t_video","mode"],"equation":["if mode == 1 then t_video - mod(time, t_video + t_processing + t_sleep) else if mode == 2 then t_processing - mod(time - t_video, t_video + t_processing + t_sleep) else t_sleep - mod(time - t_video - t_processing, t_video + t_processing + t_sleep)"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":73,"lineEnd":75,"colStart":3,"colEnd":97}}},
{"eqIndex":8,"section":"initial","tag":"assign","defines":["T_chip"],"uses":["$START.T_chip"],"equation":["$START.T_chip"],"source":{"info":{"file":"","lineStart":0,"lineEnd":0,"colStart":0,"colEnd":0}}},
{"eqIndex":9,"tag":"alias","equation":[16],"section":"initial"},
{"eqIndex":10,"parent":14,"section":"initial","tag":"torn","defines":["T_case"],"uses":["R_case_heatsink","T_heatsink","R_chip_case","T_chip"],"equation":["((-T_chip) - R_chip_case * T_heatsink / R_case_heatsink) / (-1.0 - R_chip_case / R_case_heatsink)"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":59,"lineEnd":59,"colStart":3,"colEnd":76}}},
{"eqIndex":11,"parent":14,"section":"initial","tag":"residual","uses":["R_heatsink_air","T_case","R_case_heatsink","T_ambient","T_heatsink"],"equation":["(-273.15 + T_heatsink - T_ambient) * R_case_heatsink + (T_heatsink - T_case) * R_heatsink_air"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":60,"lineEnd":60,"colStart":3,"colEnd":97}}},
{"eqIndex":12,"parent":14,"section":"initial","tag":"jacobian","defines":["T_case.$pDERLSJac0.dummyVarLSJac0"],"uses":["R_case_heatsink","R_chip_case","T_heatsink.SeedLSJac0"],"equation":["T_heatsink.SeedLSJac0 * R_chip_case / (R_chip_case + R_case_heatsink)"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":59,"lineEnd":59,"colStart":3,"colEnd":76}}},
{"eqIndex":13,"parent":14,"section":"initial","tag":"jacobian","defines":["$res_LSJac0_1.$pDERLSJac0.dummyVarLSJac0"],"uses":["R_heatsink_air","T_case.$pDERLSJac0.dummyVarLSJac0","R_case_heatsink","T_heatsink.SeedLSJac0"],"equation":["T_heatsink.SeedLSJac0 * R_case_heatsink + (T_heatsink.SeedLSJac0 - T_case.$pDERLSJac0.dummyVarLSJac0) * R_heatsink_air"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":60,"lineEnd":60,"colStart":3,"colEnd":97}}},
{"eqIndex":14,"section":"initial","tag":"tornsystem","display":"linear","unknowns":2,"defines":["T_heatsink"],"equation":[{"size":0,"A":[],"b":[]}]},
{"eqIndex":15,"tag":"alias","equation":[28],"section":"initial"},
{"eqIndex":16,"section":"regular","tag":"assign","defines":["T_celsius"],"uses":["T_chip"],"equation":["-273.15 + T_chip"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":67,"lineEnd":67,"colStart":3,"colEnd":30}}},
{"eqIndex":17,"parent":21,"section":"regular","tag":"torn","defines":["T_case"],"uses":["R_case_heatsink","T_heatsink","R_chip_case","T_chip"],"equation":["((-T_chip) - R_chip_case * T_heatsink / R_case_heatsink) / (-1.0 - R_chip_case / R_case_heatsink)"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":59,"lineEnd":59,"colStart":3,"colEnd":76}}},
{"eqIndex":18,"parent":21,"section":"regular","tag":"residual","uses":["R_heatsink_air","T_case","R_case_heatsink","T_ambient","T_heatsink"],"equation":["(-273.15 + T_heatsink - T_ambient) * R_case_heatsink + (T_heatsink - T_case) * R_heatsink_air"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":60,"lineEnd":60,"colStart":3,"colEnd":97}}},
{"eqIndex":19,"parent":21,"section":"regular","tag":"jacobian","defines":["T_case.$pDERLSJac1.dummyVarLSJac1"],"uses":["R_case_heatsink","R_chip_case","T_heatsink.SeedLSJac1"],"equation":["T_heatsink.SeedLSJac1 * R_chip_case / (R_chip_case + R_case_heatsink)"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":59,"lineEnd":59,"colStart":3,"colEnd":76}}},
{"eqIndex":20,"parent":21,"section":"regular","tag":"jacobian","defines":["$res_LSJac1_1.$pDERLSJac1.dummyVarLSJac1"],"uses":["R_heatsink_air","T_case.$pDERLSJac1.dummyVarLSJac1","R_case_heatsink","T_heatsink.SeedLSJac1"],"equation":["T_heatsink.SeedLSJac1 * R_case_heatsink + (T_heatsink.SeedLSJac1 - T_case.$pDERLSJac1.dummyVarLSJac1) * R_heatsink_air"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":60,"lineEnd":60,"colStart":3,"colEnd":97}}},
{"eqIndex":21,"section":"regular","tag":"tornsystem","display":"linear","unknowns":2,"defines":["T_heatsink"],"equation":[{"size":0,"A":[],"b":[]}]},
{"eqIndex":22,"section":"regular","tag":"assign","defines":["mode"],"uses":["t_sleep","t_processing","t_video","time"],"equation":["if time < t_video then 1 else if time < t_video + t_processing then 2 else if time < t_video + t_processing + t_sleep then 3 else 1"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":44,"lineEnd":47,"colStart":3,"colEnd":15}}},
{"eqIndex":23,"section":"regular","tag":"assign","defines":["i_load"],"uses":["I_sleep","I_processing","I_video","mode"],"equation":["if mode == 1 then I_video else if mode == 2 then I_processing else I_sleep"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":50,"lineEnd":51,"colStart":3,"colEnd":64}}},
{"eqIndex":24,"section":"regular","tag":"assign","defines":["battery_charge"],"uses":["time","i_load","Q_initial"],"equation":["Q_initial + 0.0002777777777777778 * (-i_load) * time"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":63,"lineEnd":63,"colStart":3,"colEnd":52}}},
{"eqIndex":25,"section":"regular","tag":"assign","defines":["SoC"],"uses":["Q_initial","battery_charge"],"equation":["max(0.0, battery_charge / Q_initial * 100.0)"],"source":{"info":{"file":"","lineStart":0,"lineEnd":0,"colStart":0,"colEnd":0}}},
{"eqIndex":26,"section":"regular","tag":"assign","defines":["power_consumption"],"uses":["V_battery","i_load"],"equation":["i_load * V_battery"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":70,"lineEnd":70,"colStart":3,"colEnd":41}}},
{"eqIndex":27,"section":"regular","tag":"assign","defines":["p_dissipation"],"uses":["P_sleep","P_active","mode"],"equation":["if mode == 1 then P_active else if mode == 2 then P_active else P_sleep"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":54,"lineEnd":55,"colStart":3,"colEnd":67}}},
{"eqIndex":28,"section":"regular","tag":"assign","defines":["der(T_chip)"],"uses":["C_chip","R_chip_case","T_chip","T_case","p_dissipation"],"equation":["(p_dissipation + (T_case - T_chip) / R_chip_case) / C_chip"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":58,"lineEnd":58,"colStart":3,"colEnd":73}}},
{"eqIndex":29,"section":"regular","tag":"assign","defines":["t_next_switch"],"uses":["t_sleep","t_processing","time","t_video","mode"],"equation":["if mode == 1 then t_video - mod(time, t_video + t_processing + t_sleep, 0) else if mode == 2 then t_processing - mod(time - t_video, t_video + t_processing + t_sleep, 3) else t_sleep - mod(time - t_video - t_processing, t_video + t_processing + t_sleep, 6)"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":73,"lineEnd":75,"colStart":3,"colEnd":97}}},
{"eqIndex":30,"section":"start","tag":"assign","defines":["$START.T_chip"],"uses":["T_initial"],"equation":["T_initial + 273.15"],"source":{"info":{"file":"/app/ESP32_CAM_Thermal_Energy.mo","lineStart":25,"lineEnd":25,"colStart":3,"colEnd":65}}}
],
"functions":[
]
}